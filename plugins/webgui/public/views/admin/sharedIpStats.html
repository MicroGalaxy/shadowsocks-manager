<!-- Custom styles for the table -->
<style>
    .custom-bordered-table {
        border-collapse: collapse;
        width: 100%;
    }
    .custom-bordered-table th,
    .custom-bordered-table td {
        border: 1px solid rgba(0, 0, 0, 0.12);
        padding: 12px 16px;
        text-align: left;
    }
    .custom-bordered-table thead th {
        font-weight: bold;
        background-color: #f5f5f5;
    }
    .custom-bordered-table tbody tr.striped-row {
        background-color: #fafafa;
    }
    .hot-account-item {
        cursor: pointer;
    }
    .hot-account-item:hover {
        background-color: #f5f5f5;
    }
</style>

<md-content layout-padding>
    <md-card>
        <md-card-title>
            <md-card-title-text>
                <span class="md-headline">共享IP热点统计</span>
                <span class="md-subhead">最近一周共享IP出现最频繁的账号排行</span>
            </md-card-title-text>
        </md-card-title>

        <md-card-content>
            <div ng-if="isLoading" layout="row" layout-align="center center" style="padding: 32px;">
                <md-progress-circular md-mode="indeterminate"></md-progress-circular>
            </div>

            <div ng-if="!isLoading && !stats.length" layout="column" layout-align="center center" style="padding: 48px; color: rgba(0,0,0,0.54);">
                <md-icon md-svg-icon="./public/svg/info_outline.svg" style="width: 48px; height: 48px;"></md-icon>
                <p style="margin-top: 16px;">暂无共享IP统计数据</p>
            </div>

            <div ng-if="!isLoading && stats.length">
                <md-table-container>
                    <table md-table class="custom-bordered-table">
                        <thead md-head>
                            <tr md-row>
                                <th md-column><span>排名</span></th>
                                <th md-column><span>账号端口</span></th>
                                <th md-column><span>共享次数</span></th>
                                <th md-column><span>操作</span></th>
                            </tr>
                        </thead>
                        <tbody md-body>
                            <tr md-row ng-repeat="stat in stats track by stat.port" 
                                ng-class="{'striped-row': $even}" class="hot-account-item">
                                <td md-cell>{{getRank($index)}}</td>
                                <td md-cell>
                                    <span ng-if="stat.accountId" ng-click="toAccountById(stat.accountId); $event.stopPropagation();" 
                                          style="cursor: pointer; color: #2196F3;">账号{{stat.port}}</span>
                                    <span ng-if="!stat.accountId" style="color: #999;">账号{{stat.port}}</span>
                                </td>
                                <td md-cell>
                                    <span style="font-weight: bold; color: #f44336;">{{stat.sharedCount}}次</span>
                                </td>
                                <td md-cell>
                                    <md-button class="md-raised md-primary" ng-click="toSharedIp(stat.port.toString()); $event.stopPropagation();">
                                        查看详情
                                    </md-button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </md-table-container>

                <!-- Pagination Controls -->
                <div layout="row" layout-align="end center" style="padding-top: 16px;">
                    <span>第 {{currentPage}} / {{totalPages}} 页 (共 {{totalCount}} 条)</span>
                    <md-button class="md-icon-button" ng-click="previousPage()" ng-disabled="currentPage === 1" aria-label="Previous Page">
                        <md-icon>chevron_left</md-icon>
                    </md-button>
                    <md-button class="md-icon-button" ng-click="nextPage()" ng-disabled="currentPage >= totalPages" aria-label="Next Page">
                        <md-icon>chevron_right</md-icon>
                    </md-button>
                </div>
            </div>
        </md-card-content>
    </md-card>
</md-content>