<!-- Custom styles for the table -->
<style>
    .custom-bordered-table {
        border-collapse: collapse;
        width: 100%;
    }
    .custom-bordered-table th,
    .custom-bordered-table td {
        border: 1px solid rgba(0, 0, 0, 0.12);
        padding: 12px 16px;
        text-align: left;
    }
    .custom-bordered-table thead th {
        font-weight: bold;
        background-color: #f5f5f5;
    }
    .custom-bordered-table tbody tr.striped-row {
        background-color: #fafafa;
    }
</style>

<md-content layout-padding>
    <md-card>
        <md-card-title>
            <md-card-title-text>
                <span class="md-headline">共享IP记录 (端口: {{port}})</span>
                <span class="md-subhead">以下是该端口的所有共享使用记录</span>
            </md-card-title-text>
            <md-button class="md-warn md-raised" ng-click="deleteRecords($event)" ng-if="allRecords.length">
                删除所有记录
            </md-button>
        </md-card-title>

        <md-card-content>
            <div ng-if="isLoading" layout="row" layout-align="center center" style="padding: 32px;">
                <md-progress-circular md-mode="indeterminate"></md-progress-circular>
            </div>

            <div ng-if="!isLoading && !allRecords.length" layout="column" layout-align="center center" style="padding: 48px; color: rgba(0,0,0,0.54);">
                <md-icon md-svg-icon="./public/svg/info_outline.svg" style="width: 48px; height: 48px;"></md-icon>
                <p style="margin-top: 16px;">没有找到该端口的共享记录</p>
            </div>

            <div ng-if="!isLoading && allRecords.length">
                <md-table-container>
                    <table md-table class="custom-bordered-table">
                        <thead md-head>
                            <tr md-row>
                                <th md-column><span>时间</span></th>
                                <th md-column><span>消息</span></th>
                            </tr>
                        </thead>
                        <tbody md-body>
                            <tr md-row ng-repeat="record in paginatedRecords track by record.id" ng-class="{'striped-row': $even}">
                                <td md-cell>{{ record.time | date:'yyyy-MM-dd HH:mm:ss' }}</td>
                                <td md-cell>{{ record.message || '---' }}</td>
                            </tr>
                        </tbody>
                    </table>
                </md-table-container>

                <!-- Pagination Controls -->
                <div layout="row" layout-align="end center" style="padding-top: 16px;">
                    <span>第 {{currentPage}} / {{getTotalPages()}} 页 (共 {{allRecords.length}} 条)</span>
                    <md-button class="md-icon-button" ng-click="previousPage()" ng-disabled="currentPage === 1" aria-label="Previous Page">
                        <md-icon>chevron_left</md-icon>
                    </md-button>
                    <md-button class="md-icon-button" ng-click="nextPage()" ng-disabled="currentPage >= getTotalPages()" aria-label="Next Page">
                        <md-icon>chevron_right</md-icon>
                    </md-button>
                </div>
            </div>
        </md-card-content>
    </md-card>
</md-content>
